<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <script src="https://code.jquery.com/jquery.js"></script>
  <link href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans:700i" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css">

  <title>Friend Finder</title>
</head>

<body style="background:url('background1.jpg')">
  <div class="container" style="font-family: 'IBM Plex Sans', sans-serif; border-style: double ">
    <div class=" jumbotron-fluid">
      <h1 class="display-2 text-center ">FRIEND FINDER</h1>
      <hr>
    </div>
    <h5 style="margin-left:800px"><a href="api/friendlist">API Friends List</a></h5>
    <div style="margin-bottom: 50px">
      <h3>Survey Questions</h3><br>
      <h4>About You</h4>
      Name(Required) : <input type="text" class="form-control" id="name" aria-label="Default">
      Link to Photo Image(Required) : <input type="text" id="imageurl" class="form-control" aria-label="Default">
      <h4 style="margin:20px">Questions</h4>
      <div class="row" style="margin: 20px;">
        <div class="col"> 1. Your mind is always buzzing with unexplored ideas and plans.</div>
        <div class="col">
          <div class="dropdown">
            <button class="btn btn-secondary dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true"
              aria-expanded="false" id="question1">
              Select an option
            </button>
            <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
              <li><a class="dropdown-item" data-value="1">1(Strongly Disagree)</a></li>
              <li><a class="dropdown-item" data-value="2">2</a></li>
              <li><a class="dropdown-item" data-value="3">3</a></li>
              <li><a class="dropdown-item" data-value="4">4</a></li>
              <li><a class="dropdown-item" data-value="5">5(Strongly Agree)</a></li>

            </ul>
          </div>
        </div>
      </div>
      <div class="row" style="margin: 20px;">
        <div class="col"> 2. Generally speaking, you rely more on your experience than your imagination.</div>
        <div class="col">
          <div class="dropdown">
            <button class="btn btn-secondary dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true"
              aria-expanded="false" id="question2">
              Select an option
            </button>
            <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
              <li><a class="dropdown-item" data-value="1">1(Strongly Disagree)</a></li>
              <li><a class="dropdown-item" data-value="2">2</a></li>
              <li><a class="dropdown-item" data-value="3">3</a></li>
              <li><a class="dropdown-item" data-value="4">4</a></li>
              <li><a class="dropdown-item" data-value="5">5(Strongly Agree)</a></li>

            </ul>
          </div>
        </div>
      </div>
      <div class="row" style="margin: 20px;">
        <div class="col"> 3. You find it easy to stay relaxed and focused even when there is some pressure.</div>
        <div class="col">
          <div class="dropdown">
            <button class="btn btn-secondary dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true"
              aria-expanded="false" id="question3">
              Select an option
            </button>
            <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
              <li><a class="dropdown-item" data-value="1">1(Strongly Disagree)</a></li>
              <li><a class="dropdown-item" data-value="2">2</a></li>
              <li><a class="dropdown-item" data-value="3">3</a></li>
              <li><a class="dropdown-item" data-value="4">4</a></li>
              <li><a class="dropdown-item" data-value="5">5(Strongly Agree)</a></li>

            </ul>
          </div>
        </div>
      </div>
      <div class="row" style="margin: 20px;">
        <div class="col"> 4. You rarely do something just out of sheer curiosity.</div>
        <div class="col">
          <div class="dropdown">
            <button class="btn btn-secondary dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true"
              aria-expanded="false" id="question4">
              Select an option
            </button>
            <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
              <li><a class="dropdown-item" data-value="1">1(Strongly Disagree)</a></li>
              <li><a class="dropdown-item" data-value="2">2</a></li>
              <li><a class="dropdown-item" data-value="3">3</a></li>
              <li><a class="dropdown-item" data-value="4">4</a></li>
              <li><a class="dropdown-item" data-value="5">5(Strongly Agree)</a></li>
            </ul>
          </div>
        </div>
      </div>
      <div class="row" style="margin: 20px;">
        <div class="col"> 5. People can rarely upset you.</div>
        <div class="col">
          <div class="dropdown">
            <button class="btn btn-secondary dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true"
              aria-expanded="false" id="question5">
              Select an option
            </button>
            <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
              <li><a class="dropdown-item" data-value="1">1(Strongly Disagree)</a></li>
              <li><a class="dropdown-item" data-value="2">2</a></li>
              <li><a class="dropdown-item" data-value="3">3</a></li>
              <li><a class="dropdown-item" data-value="4">4</a></li>
              <li><a class="dropdown-item" data-value="5">5(Strongly Agree)</a></li>

            </ul>
          </div>
        </div>
      </div>
      <div class="row" style="margin: 20px;">
        <div class="col"> 6. It is often difficult for you to relate to other people’s feelings.</div>
        <div class="col">
          <div class="dropdown">
            <button class="btn btn-secondary dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true"
              aria-expanded="false" id="question6">
              Select an option
            </button>
            <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
              <li><a class="dropdown-item" data-value="1">1(Strongly Disagree)</a></li>
              <li><a class="dropdown-item" data-value="2">2</a></li>
              <li><a class="dropdown-item" data-value="3">3</a></li>
              <li><a class="dropdown-item" data-value="4">4</a></li>
              <li><a class="dropdown-item" data-value="5">5(Strongly Agree)</a></li>

            </ul>
          </div>
        </div>
      </div>
      <div class="row" style="margin: 20px;">
        <div class="col"> 7.In a discussion, truth should be more important than people’s sensitivities.</div>
        <div class="col">
          <div class="dropdown">
            <button class="btn btn-secondary dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true"
              aria-expanded="false" id="question7">
              Select an option
            </button>
            <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
              <li><a class="dropdown-item" data-value="1">1(Strongly Disagree)</a></li>
              <li><a class="dropdown-item" data-value="2">2</a></li>
              <li><a class="dropdown-item" data-value="3">3</a></li>
              <li><a class="dropdown-item" data-value="4">4</a></li>
              <li><a class="dropdown-item" data-value="5">5(Strongly Agree)</a></li>

            </ul>
          </div>
        </div>
      </div>
      <div class="row" style="margin: 20px;">
        <div class="col"> 8.You rarely get carried away by fantasies and ideas.</div>
        <div class="col">
          <div class="dropdown">
            <button class="btn btn-secondary dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true"
              aria-expanded="false" id="question8">
              Select an option
            </button>
            <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
              <li><a class="dropdown-item" data-value="1">1(Strongly Disagree)</a></li>
              <li><a class="dropdown-item" data-value="2">2</a></li>
              <li><a class="dropdown-item" data-value="3">3</a></li>
              <li><a class="dropdown-item" data-value="4">4</a></li>
              <li><a class="dropdown-item" data-value="5">5(Strongly Agree)</a></li>
            </ul>
          </div>
        </div>
      </div>
      <div class="row" style="margin: 20px;">
        <div class="col"> 9.You think that everyone’s views should be respected regardless of whether they are
          supported by facts or not.</div>
        <div class="col">
          <div class="dropdown">
            <button class="btn btn-secondary dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true"
              aria-expanded="false" id="question9">
              Select an option<span class="caret"></span>
            </button>
            <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
              <li><a class="dropdown-item" data-value="1">1(Strongly Disagree)</a></li>
              <li><a class="dropdown-item" data-value="2">2</a></li>
              <li><a class="dropdown-item" data-value="3">3</a></li>
              <li><a class="dropdown-item" data-value="4">4</a></li>
              <li><a class="dropdown-item" data-value="5">5(Strongly Agree)</a></li>
            </ul>
          </div>
        </div>
      </div>
      <div class="row" style="margin: 20px;">
        <div class="col"> 10.You feel more energetic after spending time with a group of people.</div>
        <div class="col">
          <div class="dropdown">
            <button class="btn btn-secondary dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true"
              aria-expanded="false" id="question10">
              Select an option
            </button>
            <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
              <li><a class="dropdown-item" data-value="1">1(Strongly Disagree)</a></li>
              <li><a class="dropdown-item" data-value="2">2</a></li>
              <li><a class="dropdown-item" data-value="3">3</a></li>
              <li><a class="dropdown-item" data-value="4">4</a></li>
              <li><a class="dropdown-item" data-value="5">5(Strongly Agree)</a></li>
            </ul>
          </div>
        </div>
      </div>
      <button class="btn btn-large btn-block btn-outline-danger" type="submit" id="btn-submit">Submit</button>
      <div id="match-modal" class="modal fade" role="dialog">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">              
              <h2 class="modal-title"><strong>Best Match</strong></h2>
            </div>
            <div class="modal-body">
              <h2 id="match-name"></h2>
              <img id="match-img" src="" alt="">
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.13.0/umd/popper.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/js/bootstrap.min.js"></script>
  <script>
    //This is to populate the drop downs on page load
    $(".dropdown-menu li a").click(function () {
      $(this).parents(".dropdown").find('.btn').html($(this).text() + ' <span class="caret"></span>');
      $(this).parents(".dropdown").find('.btn').val($(this).data('value'));
    });
    //On submit this function would do an ajax post and run the logic to get the matching friend 
    $("#btn-submit").click(function (event) {
      event.preventDefault();

      if (validate) {
        var friendData = {
          name: $("#name").val().trim(),
          imageURL: $("#imageurl").val().trim(),
          scores: [$("#question1").attr("value"),
            $("#question2").attr("value"),
            $("#question3").attr("value"),
            $("#question4").attr("value"),
            $("#question5").attr("value"),
            $("#question6").attr("value"),
            $("#question7").attr("value"),
            $("#question8").attr("value"),
            $("#question9").attr("value"),
            $("#question10").attr("value")
          ]
        };
        //console.log(data);
        // send data to server
        $.ajax({
          url: "/api/friendlist",
          method: "POST",
          data: friendData // req.body
        }).then(function (response) {
          console.log(response);
          $("#match-name").text(response.name);
          $("#match-img").attr("src", response.imageURL);
          clearForm();
          $("#match-modal").modal("toggle");
        })

      } else {
        alert("Please fill out all the questions!!!");
      }


    });
    //This function clears all the fields on submit
    function clearForm()
    {
      $("#name").val("");
      $("#imageurl").val("");
      $(".dropdown-toggle").text("Select an Option");
      $(".dropdown-toggle").attr("value","");

    }
    //This function validates if all the fields in the form are populated.
    function validate() {
      var valid = true;
      if ($("#name").val().trim() === "") {
        valid = false;
      }
      if ($("#imageurl").val().trim() === "") {
        valid = false;
      }
      $(".dropdown-toggle").each(function () {
        if ($(this).val() === "") {
          valid = false;
        }
      });
      return valid;
    }
 </script>
</body>
</html>